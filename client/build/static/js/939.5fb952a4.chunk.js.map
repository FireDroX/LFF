{"version":3,"file":"static/js/939.5fb952a4.chunk.js","mappings":"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","sources":["components/Leaderboard/Leaderboard.jsx","utils/pointOptions.js","components/AddPoints/AddPoints.jsx","pages/weekly/Weekly.jsx"],"sourcesContent":["import \"./Leaderboard.css\";\nimport { FaTrophy } from \"react-icons/fa\";\nimport { formatNumberWithSpaces, formatDateShort } from \"../../utils/functions\";\n\nconst Leaderboard = ({\n  title,\n  top,\n  start,\n  end,\n  requiredAmount,\n  currentUser,\n}) => {\n  // On trie les joueurs par score décroissant\n  const sorted = Array.isArray(top)\n    ? [...top].sort((a, b) => b.score - a.score)\n    : [];\n\n  // Trouver la position où les scores passent en dessous de `requiredAmount` (50 ou 1000)\n  const separationIndex = sorted.findIndex(\n    (player) => player.score < requiredAmount\n  );\n\n  // Find the current user's position\n  const userPosition = currentUser\n    ? sorted.findIndex((u) => u.userId === currentUser) + 1\n    : 0;\n\n  const startFormatted = formatDateShort(start);\n  const endFormatted = formatDateShort(end);\n\n  return (\n    <div>\n      <h5 style={{ color: \"var(--text85)\" }}>{title}</h5>\n      <ul className=\"lff-classement\">\n        {Array.isArray(sorted) &&\n          sorted.slice(0, 5).flatMap(({ score, name }, index) => {\n            const items = [];\n            if (separationIndex === index) {\n              items.push(\n                <li key={`separator-${index}`} className=\"lff-separator\">\n                  <span className=\"lff-separator-text\">\n                    {requiredAmount} pts mini\n                  </span>\n                </li>\n              );\n            }\n            items.push(\n              <li key={`player-${index}`}>\n                <span className=\"lff-classement-top\">\n                  {index === 0 ? (\n                    <FaTrophy color=\"#FFD700\" />\n                  ) : index === 1 ? (\n                    <FaTrophy color=\"#C0C0C0\" />\n                  ) : index === 2 ? (\n                    <FaTrophy color=\"#CD7F32\" />\n                  ) : (\n                    index + 1\n                  )}\n                </span>\n                <span className=\"lff-classement-score\">\n                  {formatNumberWithSpaces(score)}\n                </span>\n                <span className=\"lff-classement-name\">{name}</span>\n              </li>\n            );\n            return items;\n          })}\n\n        <li key=\"dates\" className=\"lff-separator\">\n          <span className=\"lff-separator-text\">\n            {startFormatted && endFormatted\n              ? `${startFormatted} - ${endFormatted}`\n              : \"\"}\n          </span>\n        </li>\n        {userPosition > 0 && (\n          <li key={\"player-current\"}>\n            <span className=\"lff-classement-top\">\n              {userPosition === 1 ? (\n                <FaTrophy color=\"#FFD700\" />\n              ) : userPosition === 2 ? (\n                <FaTrophy color=\"#C0C0C0\" />\n              ) : userPosition === 3 ? (\n                <FaTrophy color=\"#CD7F32\" />\n              ) : (\n                userPosition\n              )}\n            </span>\n            <span className=\"lff-classement-score\">\n              {formatNumberWithSpaces(sorted[userPosition - 1]?.score)}\n            </span>\n            <span className=\"lff-classement-name\">\n              {sorted[userPosition - 1]?.name}\n            </span>\n          </li>\n        )}\n      </ul>\n    </div>\n  );\n};\n\nexport default Leaderboard;\n","import { formatNumberWithSpaces, compactNumber } from \"./functions\";\n\nimport crystaux from \"../assets/crystaux.webp\";\nimport pvp from \"../assets/pvp.webp\";\nimport iscoin from \"../assets/iscoin.webp\";\nimport dragon_egg from \"../assets/dragon_egg.webp\";\nimport beacon from \"../assets/beacon.webp\";\nimport sponge from \"../assets/sponge.webp\";\n\nexport const WEEKLY_OPTIONS = {\n  crystaux: {\n    multiplier: 100,\n    label: \"Crystaux\",\n    format: (p) =>\n      `${formatNumberWithSpaces(p)} = ${compactNumber(p * 100)} Crystaux`,\n    requiredAmount: 100,\n    icon: crystaux,\n  },\n  pvp: {\n    multiplier: 1,\n    label: \"PVP\",\n    format: (p) => `${formatNumberWithSpaces(p)} pts`,\n    requiredAmount: 100,\n    icon: pvp,\n  },\n  iscoin: {\n    multiplier: 2000000,\n    label: \"IsCoin\",\n    format: (p) =>\n      `${formatNumberWithSpaces(p)} = ${compactNumber(p * 2000000)} $`,\n    requiredAmount: 10000,\n    icon: iscoin,\n  },\n};\n\nexport const ISVALUE_OPTIONS = {\n  dragonegg: {\n    multiplier: 1500000000,\n    label: \"DragonEgg\",\n    format: (p) =>\n      `${formatNumberWithSpaces(p)} = ${compactNumber(p * 1500000000)} $`,\n    icon: dragon_egg,\n  },\n  beacon: {\n    multiplier: 150000000,\n    label: \"Beacon\",\n    format: (p) =>\n      `${formatNumberWithSpaces(p)} = ${compactNumber(p * 150000000)} $`,\n    icon: beacon,\n  },\n  sponge: {\n    multiplier: 15000000,\n    label: \"Sponge\",\n    format: (p) =>\n      `${formatNumberWithSpaces(p)} = ${compactNumber(p * 15000000)} $`,\n    icon: sponge,\n  },\n};\n","import \"./AddPoints.css\";\nimport { useState } from \"react\";\n\nimport { IoIosAdd } from \"react-icons/io\";\n\nimport { addPoints } from \"../../utils/requests\";\n\nconst AddPoints = ({ setTops, selectDefault, options }) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const [points, setPoints] = useState(0);\n  const [selected, setSelected] = useState(selectDefault);\n\n  return (\n    <>\n      <div\n        className=\"add-points-container\"\n        onClick={() => setIsOpen((prev) => !prev)}\n      >\n        <IoIosAdd />\n      </div>\n      {isOpen && (\n        <div className=\"add-points\">\n          <p className=\"grid-add1\">Classement</p>\n          <select\n            className=\"grid-add2\"\n            name=\"Classement\"\n            value={selected}\n            onChange={(e) => setSelected(e.target.value)}\n          >\n            {Object.keys(options).map((key) => (\n              <option key={key} value={key}>\n                {options[key].label} {options[key].emoji}\n              </option>\n            ))}\n          </select>\n          <input\n            className=\"grid-add3\"\n            type=\"number\"\n            name=\"Points\"\n            value={points}\n            min=\"0\"\n            max=\"10000\"\n            onChange={(e) => {\n              if (!e.target.value || e.target.value < 0) setPoints(0);\n              else if (e.target.value > 10000) setPoints(10000);\n              else setPoints(parseInt(e.target.value));\n            }}\n          />\n          <button\n            className=\"grid-add4\"\n            onClick={() => {\n              if (points > 0) {\n                addPoints(points, selected.toLowerCase()).then((newTop) => {\n                  setTops((prev) => ({\n                    ...prev,\n                    [selected.toLowerCase()]: {\n                      ...prev[selected.toLowerCase()],\n                      users: newTop.users,\n                    },\n                  }));\n                });\n                setPoints(0);\n                setIsOpen(false);\n              }\n            }}\n          >\n            Ajouter\n          </button>\n          <p className=\"grid-add5\">{options[selected].format(points) || \"\"}</p>\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default AddPoints;\n","import { useEffect, useState } from \"react\";\n\nimport { currentTop } from \"../../utils/requests\";\nimport { formatTop, filterPointOptions } from \"../../utils/functions\";\nimport { WEEKLY_OPTIONS as pointOptions } from \"../../utils/pointOptions\";\n\nimport AddPoints from \"../../components/AddPoints/AddPoints\";\nimport Leaderboard from \"../../components/Leaderboard/Leaderboard\";\n\nconst Weekly = ({ isLogged, flags, currentUser }) => {\n  const [tops, setTops] = useState({\n    crystaux: { users: [] },\n    pvp: { users: [] },\n    iscoin: { users: [] },\n  });\n\n  // ✅ Filtre pointOptions selon flags\n  const filteredPointOptions = filterPointOptions(pointOptions, flags);\n\n  useEffect(() => {\n    // Charger crystaux, pvp et iscoin\n    Promise.all([\n      currentTop(\"crystaux\"),\n      currentTop(\"pvp\"),\n      currentTop(\"iscoin\"),\n    ]).then(([crystauxData, pvpData, iscoinData]) => {\n      setTops({\n        crystaux: formatTop(\n          crystauxData.users,\n          crystauxData.start,\n          crystauxData.end\n        ),\n        pvp: formatTop(pvpData.users, pvpData.start, pvpData.end),\n        iscoin: formatTop(iscoinData.users, iscoinData.start, iscoinData.end),\n      });\n    });\n  }, []);\n\n  const keys = [\"crystaux\", \"pvp\", \"iscoin\"];\n\n  return (\n    <section className=\"App\">\n      <div className=\"lff-classements-container\">\n        {/* Classement Crystaux et IsCoin */}\n        {keys.map((k) => (\n          <Leaderboard\n            key={k}\n            title={\n              <>\n                {pointOptions[k].label}{\" \"}\n                <img\n                  className=\"lff-classements-icon\"\n                  src={pointOptions[k].icon}\n                  alt={pointOptions[k].label}\n                />\n              </>\n            }\n            top={tops[k]?.users}\n            start={tops[k]?.start}\n            end={tops[k]?.end}\n            requiredAmount={pointOptions[k].requiredAmount}\n            currentUser={currentUser}\n          />\n        ))}\n      </div>\n\n      {/* ✅ Affiche AddPoints seulement si connecté + flags > 0 */}\n      {isLogged && Object.keys(filteredPointOptions).length > 0 && (\n        <AddPoints\n          setTops={setTops}\n          selectDefault={Object.keys(filteredPointOptions)[0]}\n          options={filteredPointOptions}\n        />\n      )}\n    </section>\n  );\n};\n\nexport default Weekly;\n"],"names":["_ref","_sorted","_sorted2","title","top","start","end","requiredAmount","currentUser","sorted","Array","isArray","sort","a","b","score","separationIndex","findIndex","player","userPosition","u","userId","startFormatted","formatDateShort","endFormatted","_jsxs","children","_jsx","style","color","className","slice","flatMap","_ref2","index","name","items","push","concat","FaTrophy","formatNumberWithSpaces","WEEKLY_OPTIONS","crystaux","multiplier","label","format","p","compactNumber","icon","pvp","iscoin","ISVALUE_OPTIONS","dragonegg","dragon_egg","beacon","sponge","setTops","selectDefault","options","isOpen","setIsOpen","useState","points","setPoints","selected","setSelected","_Fragment","onClick","prev","IoIosAdd","value","onChange","e","target","Object","keys","map","key","emoji","type","min","max","parseInt","addPoints","toLowerCase","then","newTop","_objectSpread","users","isLogged","flags","tops","filteredPointOptions","filterPointOptions","pointOptions","useEffect","Promise","all","currentTop","crystauxData","pvpData","iscoinData","formatTop","k","_tops$k","_tops$k2","_tops$k3","Leaderboard","src","alt","length","AddPoints"],"sourceRoot":""}