{"version":3,"file":"static/js/479.43e931aa.chunk.js","mappings":"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","sources":["utils/pointOptions.js","components/Dropdown/Dropdown.jsx","pages/dashboard/Dashboard.jsx"],"sourcesContent":["import { formatNumberWithSpaces, compactNumber } from \"./functions\";\n\nimport crystaux from \"../assets/crystaux.webp\";\nimport pvp from \"../assets/pvp.webp\";\nimport iscoin from \"../assets/iscoin.webp\";\nimport dragon_egg from \"../assets/dragon_egg.webp\";\nimport beacon from \"../assets/beacon.webp\";\nimport sponge from \"../assets/sponge.webp\";\n\nexport const WEEKLY_OPTIONS = {\n  crystaux: {\n    multiplier: 100,\n    label: \"Crystaux\",\n    format: (p) =>\n      `${formatNumberWithSpaces(p)} = ${compactNumber(p * 100)} Crystaux`,\n    requiredAmount: 100,\n    icon: crystaux,\n  },\n  pvp: {\n    multiplier: 1,\n    label: \"PVP\",\n    format: (p) => `${formatNumberWithSpaces(p)} pts`,\n    requiredAmount: 100,\n    icon: pvp,\n  },\n  iscoin: {\n    multiplier: 2000000,\n    label: \"IsCoin\",\n    format: (p) =>\n      `${formatNumberWithSpaces(p)} = ${compactNumber(p * 2000000)} $`,\n    requiredAmount: 10000,\n    icon: iscoin,\n  },\n};\n\nexport const ISVALUE_OPTIONS = {\n  dragonegg: {\n    multiplier: 1500000000,\n    label: \"DragonEgg\",\n    format: (p) =>\n      `${formatNumberWithSpaces(p)} = ${compactNumber(p * 1500000000)} $`,\n    icon: dragon_egg,\n  },\n  beacon: {\n    multiplier: 150000000,\n    label: \"Beacon\",\n    format: (p) =>\n      `${formatNumberWithSpaces(p)} = ${compactNumber(p * 150000000)} $`,\n    icon: beacon,\n  },\n  sponge: {\n    multiplier: 15000000,\n    label: \"Sponge\",\n    format: (p) =>\n      `${formatNumberWithSpaces(p)} = ${compactNumber(p * 15000000)} $`,\n    icon: sponge,\n  },\n};\n","import { useState } from \"react\";\nimport \"./Dropdown.css\";\n\nconst Dropdown = ({ types, items, onSelect }) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const [selected, setSelected] = useState(null);\n\n  const handleSelect = (item) => {\n    setSelected(item);\n    onSelect(item.label.toLowerCase());\n    setIsOpen(false);\n  };\n\n  return (\n    <div className=\"dropdown\">\n      <button\n        type=\"button\"\n        className=\"dropdown-toggle\"\n        onClick={() => setIsOpen((prev) => !prev)}\n      >\n        {selected ? (\n          <div className=\"dropdown-selected\">\n            <img src={selected.icon} alt={selected.label} />\n            <span>{selected.label}</span>\n          </div>\n        ) : (\n          <span>Sélectionner un classement</span>\n        )}\n      </button>\n\n      {isOpen && (\n        <ul className=\"dropdown-menu\">\n          {types.map((type, i) => {\n            const option = items[type] || {};\n\n            return (\n              <li\n                key={i}\n                className=\"dropdown-item\"\n                onClick={(e) => {\n                  e.preventDefault();\n                  handleSelect(option, i);\n                }}\n              >\n                <img src={option.icon} alt={option.label} />\n                <span>{option.label}</span>\n              </li>\n            );\n          })}\n        </ul>\n      )}\n    </div>\n  );\n};\n\nexport default Dropdown;\n","import \"./Dashboard.css\";\nimport { useCallback, useEffect, useState } from \"react\";\n\nimport Dropdown from \"../../components/Dropdown/Dropdown.jsx\";\n\nimport { currentTop, updatePoints } from \"../../utils/requests.js\";\nimport { WEEKLY_OPTIONS, ISVALUE_OPTIONS } from \"../../utils/pointOptions\";\nimport { formatNumberWithSpaces, formatDateShort } from \"../../utils/functions\";\n\nconst STAFF_TYPES = [\n  \"crystaux\",\n  \"pvp\",\n  \"iscoin\",\n  \"dragonegg\",\n  \"beacon\",\n  \"sponge\",\n];\nconst POINT_OPTIONS = {\n  ...WEEKLY_OPTIONS,\n  ...ISVALUE_OPTIONS,\n};\n\nconst EMPTY_FORM = {\n  selectedUserKey: \"\",\n  username: \"\",\n  userId: \"\",\n  points: \"\",\n};\n\nconst buildInitialFormsState = () =>\n  STAFF_TYPES.reduce((acc, type) => {\n    acc[type] = { ...EMPTY_FORM };\n    return acc;\n  }, {});\n\nconst Dashboard = ({ isLogged, isAdmin }) => {\n  const isStaff = isLogged && isAdmin;\n\n  const [leaderboards, setLeaderboards] = useState({});\n  const [forms, setForms] = useState(() => buildInitialFormsState());\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(\"\");\n  const [submitting, setSubmitting] = useState(null);\n  const [selectedType, setSelectedType] = useState(\"crystaux\");\n\n  const resetForm = (type) => {\n    setForms((prev) => ({\n      ...prev,\n      [type]: { ...EMPTY_FORM },\n    }));\n  };\n\n  const updateForm = (type, patch) => {\n    setForms((prev) => ({\n      ...prev,\n      [type]: {\n        ...(prev[type] || { ...EMPTY_FORM }),\n        ...patch,\n      },\n    }));\n  };\n\n  const loadLeaderboards = useCallback(() => {\n    setLoading(true);\n    Promise.all(\n      STAFF_TYPES.map((type) =>\n        currentTop(type)\n          .then((data) => {\n            if (data?.error) throw new Error(data.error);\n            return [type, data];\n          })\n          .catch((err) => {\n            console.error(`Failed to load leaderboard ${type}`, err);\n            return [type, null];\n          })\n      )\n    )\n      .then((entries) => {\n        const mapped = {};\n        let hasFailure = false;\n\n        entries.forEach(([type, data]) => {\n          if (!data) {\n            hasFailure = true;\n            return;\n          }\n          mapped[type] = data;\n        });\n\n        setLeaderboards(mapped);\n        setError(\n          hasFailure\n            ? \"Certaines données n'ont pas pu être chargées. Réessayez.\"\n            : \"\"\n        );\n      })\n      .catch((err) => {\n        console.error(\"Failed to load staff leaderboards\", err);\n        setError(\"Impossible de charger les classements pour le moment.\");\n      })\n      .finally(() => setLoading(false));\n  }, []);\n\n  useEffect(() => {\n    if (isStaff) {\n      loadLeaderboards();\n    } else {\n      setLeaderboards({});\n      setError(\"\");\n      setLoading(false);\n    }\n  }, [isStaff, loadLeaderboards]);\n\n  const handleSelectUser = (type, value) => {\n    if (!value) {\n      resetForm(type);\n      return;\n    }\n\n    const users = leaderboards[type]?.users || [];\n    let selectedUser = null;\n\n    if (value.startsWith(\"id:\")) {\n      const id = value.slice(3);\n      selectedUser = users.find(\n        (user) => user.userId && String(user.userId) === id\n      );\n    } else if (value.startsWith(\"idx:\")) {\n      const index = Number(value.slice(4));\n      if (!Number.isNaN(index) && users[index]) {\n        selectedUser = users[index];\n      }\n    }\n\n    if (selectedUser) {\n      updateForm(type, {\n        selectedUserKey: value,\n        username: selectedUser.name || \"\",\n        userId: selectedUser.userId ? String(selectedUser.userId) : \"\",\n      });\n    } else {\n      updateForm(type, { selectedUserKey: value });\n    }\n  };\n\n  const submitChange = async (type, direction) => {\n    const form = forms[type] || { ...EMPTY_FORM };\n    const amount = Number(form.points);\n\n    if (!amount || amount <= 0) {\n      setError(\"Veuillez indiquer un nombre de points strictement positif.\");\n      return;\n    }\n\n    if (!form.username && !form.userId) {\n      setError(\n        \"Un nom d'utilisateur ou un identifiant Discord est requis pour continuer.\"\n      );\n      return;\n    }\n\n    try {\n      setSubmitting(type);\n      setError(\"\");\n\n      const payload = {\n        delta: direction === \"add\" ? amount : -amount,\n        username: form.username || undefined,\n        userId: form.userId ? String(form.userId) : undefined,\n      };\n\n      const updated = await updatePoints(type, payload);\n      if (updated?.error) {\n        throw new Error(updated.error);\n      }\n\n      setLeaderboards((prev) => ({\n        ...prev,\n        [type]: {\n          ...(prev[type] || {}),\n          ...updated,\n        },\n      }));\n      resetForm(type);\n    } catch (err) {\n      console.error(\"Staff update failed\", err);\n      setError(\n        err?.message || \"Impossible de mettre à jour le classement. Réessayez.\"\n      );\n    } finally {\n      setSubmitting(null);\n    }\n  };\n\n  const renderLeaderboardRows = (users = []) => {\n    if (!Array.isArray(users) || users.length === 0) {\n      return (\n        <tr>\n          <td colSpan=\"4\" className=\"staff-empty\">\n            Aucun joueur pour le moment.\n          </td>\n        </tr>\n      );\n    }\n\n    return users.map((user, index) => (\n      <tr key={`${user.userId || user.name || index}-${index}`}>\n        <td>{index + 1}</td>\n        <td>{user.name || \"Sans nom\"}</td>\n        <td>{formatNumberWithSpaces(user.score || 0)}</td>\n        <td>{user.userId || \"—\"}</td>\n      </tr>\n    ));\n  };\n\n  if (!isStaff) {\n    return (\n      <section className=\"App\">\n        <div className=\"staff-dashboard staff-dashboard--center\">\n          <div className=\"staff-card\">\n            <h3>Accès refusé</h3>\n            <p>\n              Ce tableau de bord est réservé aux membres du staff habilités.\n            </p>\n          </div>\n        </div>\n      </section>\n    );\n  }\n\n  return (\n    <section className=\"App\">\n      <div className=\"staff-dashboard\">\n        <div className=\"staff-dashboard-header\">\n          <Dropdown\n            types={STAFF_TYPES}\n            items={POINT_OPTIONS}\n            onSelect={setSelectedType}\n          />\n\n          <button\n            className=\"staff-refresh\"\n            onClick={loadLeaderboards}\n            disabled={loading || submitting !== null}\n          >\n            Recharger\n          </button>\n        </div>\n\n        {error && <div className=\"staff-error\">{error}</div>}\n\n        {loading ? (\n          <div className=\"spinner-container\">\n            <div className=\"spinner\" aria-hidden=\"true\"></div>\n          </div>\n        ) : (\n          <div className=\"staff-grid\">\n            {(selectedType ? [selectedType] : STAFF_TYPES).map((type) => {\n              const option = POINT_OPTIONS[type] || {};\n              const board = leaderboards[type] || {};\n              const users = board.users || [];\n              const form = forms[type] || { ...EMPTY_FORM };\n              const disabled = submitting === type;\n              const hasDates = board.start && board.end;\n\n              return (\n                <div className=\"staff-card\" key={type}>\n                  <div className=\"staff-card-header\">\n                    <div className=\"staff-card-title\">\n                      <h3>{option.label || type}</h3>\n                      {option.icon && (\n                        <img\n                          src={option.icon}\n                          alt={option.label || type}\n                          className=\"staff-card-icon\"\n                        />\n                      )}\n                    </div>\n                    {hasDates && (\n                      <span className=\"staff-period\">\n                        {formatDateShort(board.start)} -{\" \"}\n                        {formatDateShort(board.end)}\n                      </span>\n                    )}\n                  </div>\n\n                  <div className=\"staff-table-wrapper\">\n                    <table className=\"staff-table\">\n                      <thead>\n                        <tr>\n                          <th>#</th>\n                          <th>Joueur</th>\n                          <th>Points</th>\n                          <th>Discord ID</th>\n                        </tr>\n                      </thead>\n                      <tbody>{renderLeaderboardRows(users)}</tbody>\n                    </table>\n                  </div>\n\n                  <div className=\"staff-form\">\n                    <label>\n                      Joueur existant\n                      <select\n                        value={form.selectedUserKey}\n                        onChange={(event) =>\n                          handleSelectUser(type, event.target.value)\n                        }\n                      >\n                        <option value=\"\">-- Nouveau membre --</option>\n                        {users.map((user, index) => {\n                          const value = user.userId\n                            ? `id:${user.userId}`\n                            : `idx:${index}`;\n                          return (\n                            <option key={value} value={value}>\n                              {user.name || \"Sans nom\"} (\n                              {formatNumberWithSpaces(user.score || 0)} pts)\n                            </option>\n                          );\n                        })}\n                      </select>\n                    </label>\n\n                    <label>\n                      Nom d'affichage\n                      <input\n                        type=\"text\"\n                        placeholder=\"Nom du joueur\"\n                        value={form.username}\n                        onChange={(event) =>\n                          updateForm(type, {\n                            username: event.target.value,\n                          })\n                        }\n                      />\n                    </label>\n\n                    <label>\n                      Discord ID (optionnel)\n                      <input\n                        type=\"text\"\n                        placeholder=\"Identifiant numérique\"\n                        value={form.userId}\n                        onChange={(event) =>\n                          updateForm(type, {\n                            userId: event.target.value.trim(),\n                          })\n                        }\n                      />\n                    </label>\n\n                    <label>\n                      Points\n                      <input\n                        type=\"number\"\n                        min=\"1\"\n                        max=\"1000000\"\n                        value={form.points}\n                        onChange={(event) =>\n                          updateForm(type, {\n                            points: event.target.value,\n                          })\n                        }\n                      />\n                    </label>\n\n                    <div className=\"staff-form-actions\">\n                      <button\n                        type=\"button\"\n                        className=\"staff-button staff-button--add\"\n                        disabled={disabled}\n                        onClick={() => submitChange(type, \"add\")}\n                      >\n                        Ajouter\n                      </button>\n                      <button\n                        type=\"button\"\n                        className=\"staff-button staff-button--remove\"\n                        disabled={disabled}\n                        onClick={() => submitChange(type, \"remove\")}\n                      >\n                        Retirer\n                      </button>\n                      <button\n                        type=\"button\"\n                        className=\"staff-button staff-button--reset\"\n                        disabled={disabled}\n                        onClick={() => resetForm(type)}\n                      >\n                        Vider\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        )}\n      </div>\n    </section>\n  );\n};\n\nexport default Dashboard;\n"],"names":["WEEKLY_OPTIONS","crystaux","multiplier","label","format","p","concat","formatNumberWithSpaces","compactNumber","requiredAmount","icon","pvp","iscoin","ISVALUE_OPTIONS","dragonegg","dragon_egg","beacon","sponge","_ref","types","items","onSelect","isOpen","setIsOpen","useState","selected","setSelected","_jsxs","className","children","_jsx","type","onClick","prev","src","alt","map","i","option","e","item","preventDefault","toLowerCase","STAFF_TYPES","POINT_OPTIONS","_objectSpread","EMPTY_FORM","selectedUserKey","username","userId","points","isLogged","isAdmin","isStaff","leaderboards","setLeaderboards","forms","setForms","reduce","acc","loading","setLoading","error","setError","submitting","setSubmitting","selectedType","setSelectedType","resetForm","updateForm","patch","loadLeaderboards","useCallback","Promise","all","currentTop","then","data","Error","catch","err","console","entries","mapped","hasFailure","forEach","_ref2","finally","useEffect","submitChange","async","direction","form","amount","Number","payload","delta","undefined","String","updated","updatePoints","message","renderLeaderboardRows","users","arguments","length","Array","isArray","user","index","name","score","colSpan","Dropdown","disabled","board","hasDates","start","end","formatDateShort","value","onChange","event","handleSelectUser","_leaderboards$type","selectedUser","startsWith","id","slice","find","isNaN","target","placeholder","trim","min","max"],"sourceRoot":""}