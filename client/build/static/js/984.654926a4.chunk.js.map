{"version":3,"file":"static/js/984.654926a4.chunk.js","mappings":"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","sources":["utils/currentTop.js","components/Leaderboard/Leaderboard.jsx","pages/weekly/Weekly.jsx","utils/addPoints.js","components/AddPoints/AddPoints.jsx"],"sourcesContent":["const { defaultURL } = require(\"./defaultURL\");\n\nconst currentTop = async (type) => {\n  const result = await fetch(defaultURL + \"/leaderboard/current/\" + type, {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n  });\n\n  const resultJson = await result.json();\n  return resultJson;\n};\n\nexport default currentTop;\n","import \"./Leaderboard.css\";\nimport { FaTrophy } from \"react-icons/fa\";\nimport { formatNumberWithSpaces, formatDateShort } from \"../../utils/functions\";\n\nconst Leaderboard = ({ title, top, start, end, requiredAmount }) => {\n  // On trie les joueurs par score dÃ©croissant\n  const sorted = Array.isArray(top)\n    ? [...top].sort((a, b) => b.score - a.score)\n    : [];\n\n  // Trouver la position oÃ¹ les scores passent en dessous de `requiredAmount` (50 ou 1000)\n  const separationIndex = sorted.findIndex(\n    (player) => player.score < requiredAmount\n  );\n\n  const startFormatted = formatDateShort(start);\n  const endFormatted = formatDateShort(end);\n\n  return (\n    <div>\n      <h5 style={{ color: \"var(--text85)\" }}>{title}</h5>\n      <ul className=\"lff-classement\">\n        {Array.isArray(sorted) &&\n          sorted.flatMap(({ score, name }, index) => {\n            const items = [];\n            if (separationIndex === index) {\n              items.push(\n                <li key={`separator-${index}`} className=\"lff-separator\">\n                  <span className=\"lff-separator-text\">\n                    {requiredAmount} pts mini\n                  </span>\n                </li>\n              );\n            }\n            items.push(\n              <li key={`player-${index}`}>\n                <span className=\"lff-classement-top\">\n                  {index === 0 ? (\n                    <FaTrophy color=\"#FFD700\" />\n                  ) : index === 1 ? (\n                    <FaTrophy color=\"#C0C0C0\" />\n                  ) : index === 2 ? (\n                    <FaTrophy color=\"#CD7F32\" />\n                  ) : (\n                    index + 1\n                  )}\n                </span>\n                <span className=\"lff-classement-score\">\n                  {formatNumberWithSpaces(score)}\n                </span>\n                <span className=\"lff-classement-name\">{name}</span>\n              </li>\n            );\n            return items;\n          })}\n\n        <li key=\"dates\" className=\"lff-separator\">\n          <span className=\"lff-separator-text\">\n            {startFormatted && endFormatted\n              ? `${startFormatted} - ${endFormatted}`\n              : \"\"}\n          </span>\n        </li>\n      </ul>\n    </div>\n  );\n};\n\nexport default Leaderboard;\n","import { useEffect, useState } from \"react\";\n\nimport currentTop from \"../../utils/currentTop\";\nimport {\n  formatTop,\n  formatNumberWithSpaces,\n  compactNumber,\n} from \"../../utils/functions\";\n\nimport AddPoints from \"../../components/AddPoints/AddPoints\";\nimport Leaderboard from \"../../components/Leaderboard/Leaderboard\";\n\nconst Weekly = ({ isLogged }) => {\n  const [tops, setTops] = useState({\n    crystaux: { users: [] },\n    iscoin: { users: [] },\n  });\n\n  const pointOptions = {\n    Crystaux: {\n      emoji: \"ðŸ’Ž\",\n      multiplier: 100,\n      label: \"Crystaux\",\n      format: (points) =>\n        `${formatNumberWithSpaces(points)} = ${compactNumber(\n          points * 100\n        )} Crystaux`,\n    },\n    IsCoin: {\n      emoji: \"ðŸª™\",\n      multiplier: 2000000,\n      label: \"IsCoin\",\n      format: (points) =>\n        `${formatNumberWithSpaces(points)} = ${compactNumber(\n          points * 2000000\n        )} $`,\n    },\n  };\n\n  useEffect(() => {\n    // Charger crystaux\n    // Charger iscoin\n    Promise.all([currentTop(\"crystaux\"), currentTop(\"iscoin\")]).then(\n      ([crystauxData, iscoinData]) => {\n        setTops({\n          crystaux: formatTop(\n            crystauxData.users,\n            crystauxData.start,\n            crystauxData.end\n          ),\n          iscoin: formatTop(iscoinData.users, iscoinData.start, iscoinData.end),\n        });\n      }\n    );\n  }, []);\n\n  return (\n    <section className=\"App\">\n      <div className=\"lff-classements-container\">\n        {/* Classement Crystaux */}\n        <Leaderboard\n          title=\"Classement Crystaux ðŸ’Ž\"\n          top={tops.crystaux?.users}\n          start={tops.crystaux?.start}\n          end={tops.crystaux?.end}\n          requiredAmount={50}\n        />\n\n        {/* Classement Iscoin */}\n        <Leaderboard\n          title=\"Classement IsCoin ðŸª™\"\n          top={tops.iscoin?.users}\n          start={tops.iscoin?.start}\n          end={tops.iscoin?.end}\n          requiredAmount={1000}\n        />\n      </div>\n\n      {isLogged && (\n        <AddPoints\n          setTops={setTops}\n          selectDefault=\"Crystaux\"\n          options={pointOptions}\n        />\n      )}\n    </section>\n  );\n};\n\nexport default Weekly;\n","const { defaultURL } = require(\"./defaultURL\");\n\nconst addPoints = async (score, selected) => {\n  const result = await fetch(defaultURL + \"/points/add/\" + selected, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: `${localStorage.getItem(\n        \"token_type\"\n      )} ${localStorage.getItem(\"access_token\")}`,\n    },\n    body: JSON.stringify({\n      score,\n    }),\n  });\n\n  const resultJson = await result.json();\n  return resultJson;\n};\n\nexport default addPoints;\n","import \"./AddPoints.css\";\nimport { useState } from \"react\";\n\nimport { IoIosAdd } from \"react-icons/io\";\n\nimport addPoints from \"../../utils/addPoints\";\n\nconst AddPoints = ({ setTops, selectDefault, options }) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const [points, setPoints] = useState(0);\n  const [selected, setSelected] = useState(selectDefault);\n\n  return (\n    <>\n      <div\n        className=\"add-points-container\"\n        onClick={() => setIsOpen((prev) => !prev)}\n      >\n        <IoIosAdd />\n      </div>\n      {isOpen && (\n        <div className=\"add-points\">\n          <p className=\"grid-add1\">Classement</p>\n          <select\n            className=\"grid-add2\"\n            name=\"Classement\"\n            value={selected}\n            onChange={(e) => setSelected(e.target.value)}\n          >\n            {Object.keys(options).map((key) => (\n              <option key={key} value={key}>\n                {options[key].label} {options[key].emoji}\n              </option>\n            ))}\n          </select>\n          <input\n            className=\"grid-add3\"\n            type=\"number\"\n            name=\"Points\"\n            value={points}\n            min=\"0\"\n            max=\"10000\"\n            onChange={(e) => {\n              if (!e.target.value || e.target.value < 0) setPoints(0);\n              else if (e.target.value > 10000) setPoints(10000);\n              else setPoints(parseInt(e.target.value));\n            }}\n          />\n          <button\n            className=\"grid-add4\"\n            onClick={() => {\n              if (points > 0) {\n                addPoints(points, selected.toLowerCase()).then((newTop) => {\n                  setTops((prev) => ({\n                    ...prev,\n                    [selected.toLowerCase()]: {\n                      ...prev[selected.toLowerCase()],\n                      users: newTop.users,\n                    },\n                  }));\n                });\n                setPoints(0);\n                setIsOpen(false);\n              }\n            }}\n          >\n            Ajouter\n          </button>\n          <p className=\"grid-add5\">{options[selected].format(points) || \"\"}</p>\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default AddPoints;\n"],"names":["defaultURL","require","async","result","fetch","type","method","headers","json","_ref","title","top","start","end","requiredAmount","sorted","Array","isArray","sort","a","b","score","separationIndex","findIndex","player","startFormatted","formatDateShort","endFormatted","_jsxs","children","_jsx","style","color","className","flatMap","_ref2","index","name","items","push","concat","FaTrophy","formatNumberWithSpaces","_tops$crystaux","_tops$crystaux2","_tops$crystaux3","_tops$iscoin","_tops$iscoin2","_tops$iscoin3","isLogged","tops","setTops","useState","crystaux","users","iscoin","pointOptions","Crystaux","emoji","multiplier","label","format","points","compactNumber","IsCoin","useEffect","Promise","all","currentTop","then","crystauxData","iscoinData","formatTop","Leaderboard","AddPoints","selectDefault","options","selected","Authorization","localStorage","getItem","body","JSON","stringify","isOpen","setIsOpen","setPoints","setSelected","_Fragment","onClick","prev","IoIosAdd","value","onChange","e","target","Object","keys","map","key","min","max","parseInt","addPoints","toLowerCase","newTop","_objectSpread"],"sourceRoot":""}