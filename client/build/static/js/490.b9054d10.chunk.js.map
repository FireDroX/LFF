{"version":3,"file":"static/js/490.b9054d10.chunk.js","mappings":"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","sources":["utils/currentTop.js","utils/pointOptions.js","components/Dropdown/Dropdown.jsx","utils/updatePoints.js","pages/dashboard/Dashboard.jsx"],"sourcesContent":["const { defaultURL } = require(\"./defaultURL\");\n\nconst currentTop = async (type) => {\n  const result = await fetch(defaultURL + \"/leaderboard/current/\" + type, {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n  });\n\n  const resultJson = await result.json();\n  return resultJson;\n};\n\nexport default currentTop;\n","import { formatNumberWithSpaces, compactNumber } from \"./functions\";\n\nimport crystaux from \"../assets/crystaux.webp\";\nimport iscoin from \"../assets/iscoin.webp\";\nimport dragon_egg from \"../assets/dragon_egg.webp\";\nimport beacon from \"../assets/beacon.webp\";\nimport sponge from \"../assets/sponge.webp\";\n\nexport const WEEKLY_OPTIONS = {\n  crystaux: {\n    multiplier: 100,\n    label: \"Crystaux\",\n    format: (p) =>\n      `${formatNumberWithSpaces(p)} = ${compactNumber(p * 100)} Crystaux`,\n    requiredAmount: 50,\n    icon: crystaux,\n  },\n  iscoin: {\n    multiplier: 2000000,\n    label: \"IsCoin\",\n    format: (p) =>\n      `${formatNumberWithSpaces(p)} = ${compactNumber(p * 2000000)} $`,\n    requiredAmount: 1000,\n    icon: iscoin,\n  },\n};\n\nexport const ISVALUE_OPTIONS = {\n  dragonegg: {\n    multiplier: 1500000000,\n    label: \"DragonEgg\",\n    format: (p) =>\n      `${formatNumberWithSpaces(p)} = ${compactNumber(p * 1500000000)} $`,\n    icon: dragon_egg,\n  },\n  beacon: {\n    multiplier: 150000000,\n    label: \"Beacon\",\n    format: (p) =>\n      `${formatNumberWithSpaces(p)} = ${compactNumber(p * 150000000)} $`,\n    icon: beacon,\n  },\n  sponge: {\n    multiplier: 15000000,\n    label: \"Sponge\",\n    format: (p) =>\n      `${formatNumberWithSpaces(p)} = ${compactNumber(p * 15000000)} $`,\n    icon: sponge,\n  },\n};\n","import { useState } from \"react\";\nimport \"./Dropdown.css\";\n\nconst Dropdown = ({ types, items, onSelect }) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const [selected, setSelected] = useState(null);\n\n  const handleSelect = (item) => {\n    setSelected(item);\n    onSelect(item.label.toLowerCase());\n    setIsOpen(false);\n  };\n\n  return (\n    <div className=\"dropdown\">\n      <button\n        type=\"button\"\n        className=\"dropdown-toggle\"\n        onClick={() => setIsOpen((prev) => !prev)}\n      >\n        {selected ? (\n          <div className=\"dropdown-selected\">\n            <img src={selected.icon} alt={selected.label} />\n            <span>{selected.label}</span>\n          </div>\n        ) : (\n          <span>Sélectionner un classement</span>\n        )}\n      </button>\n\n      {isOpen && (\n        <ul className=\"dropdown-menu\">\n          {types.map((type, i) => {\n            const option = items[type] || {};\n\n            return (\n              <li\n                key={i}\n                className=\"dropdown-item\"\n                onClick={(e) => {\n                  e.preventDefault();\n                  handleSelect(option, i);\n                }}\n              >\n                <img src={option.icon} alt={option.label} />\n                <span>{option.label}</span>\n              </li>\n            );\n          })}\n        </ul>\n      )}\n    </div>\n  );\n};\n\nexport default Dropdown;\n","const { defaultURL } = require(\"./defaultURL\");\n\nconst updatePoints = async (type, payload) => {\n  const response = await fetch(\n    `${defaultURL}/leaderboards/update/${type.toLowerCase()}`,\n    {\n      method: \"PATCH\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `${localStorage.getItem(\n          \"token_type\"\n        )} ${localStorage.getItem(\"access_token\")}`,\n      },\n      body: JSON.stringify(payload),\n    }\n  );\n\n  const resultJson = await response.json();\n\n  if (!response.ok) {\n    throw new Error(resultJson?.error || \"Staff update failed\");\n  }\n\n  return resultJson;\n};\n\nexport default updatePoints;\n","import \"./Dashboard.css\";\nimport { useCallback, useEffect, useState } from \"react\";\n\nimport Dropdown from \"../../components/Dropdown/Dropdown.jsx\";\n\nimport currentTop from \"../../utils/currentTop\";\nimport staffUpdatePoints from \"../../utils/updatePoints\";\nimport { WEEKLY_OPTIONS, ISVALUE_OPTIONS } from \"../../utils/pointOptions\";\nimport { formatNumberWithSpaces, formatDateShort } from \"../../utils/functions\";\n\nconst STAFF_TYPES = [\"crystaux\", \"iscoin\", \"dragonegg\", \"beacon\", \"sponge\"];\nconst POINT_OPTIONS = {\n  ...WEEKLY_OPTIONS,\n  ...ISVALUE_OPTIONS,\n};\n\nconst EMPTY_FORM = {\n  selectedUserKey: \"\",\n  username: \"\",\n  userId: \"\",\n  points: \"\",\n};\n\nconst buildInitialFormsState = () =>\n  STAFF_TYPES.reduce((acc, type) => {\n    acc[type] = { ...EMPTY_FORM };\n    return acc;\n  }, {});\n\nconst Dashboard = ({ isLogged, isAdmin }) => {\n  const isStaff = isLogged && isAdmin;\n\n  const [leaderboards, setLeaderboards] = useState({});\n  const [forms, setForms] = useState(() => buildInitialFormsState());\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(\"\");\n  const [submitting, setSubmitting] = useState(null);\n  const [selectedType, setSelectedType] = useState(\"crystaux\");\n\n  const resetForm = (type) => {\n    setForms((prev) => ({\n      ...prev,\n      [type]: { ...EMPTY_FORM },\n    }));\n  };\n\n  const updateForm = (type, patch) => {\n    setForms((prev) => ({\n      ...prev,\n      [type]: {\n        ...(prev[type] || { ...EMPTY_FORM }),\n        ...patch,\n      },\n    }));\n  };\n\n  const loadLeaderboards = useCallback(() => {\n    setLoading(true);\n    Promise.all(\n      STAFF_TYPES.map((type) =>\n        currentTop(type)\n          .then((data) => {\n            if (data?.error) throw new Error(data.error);\n            return [type, data];\n          })\n          .catch((err) => {\n            console.error(`Failed to load leaderboard ${type}`, err);\n            return [type, null];\n          })\n      )\n    )\n      .then((entries) => {\n        const mapped = {};\n        let hasFailure = false;\n\n        entries.forEach(([type, data]) => {\n          if (!data) {\n            hasFailure = true;\n            return;\n          }\n          mapped[type] = data;\n        });\n\n        setLeaderboards(mapped);\n        setError(\n          hasFailure\n            ? \"Certaines données n'ont pas pu être chargées. Réessayez.\"\n            : \"\"\n        );\n      })\n      .catch((err) => {\n        console.error(\"Failed to load staff leaderboards\", err);\n        setError(\"Impossible de charger les classements pour le moment.\");\n      })\n      .finally(() => setLoading(false));\n  }, []);\n\n  useEffect(() => {\n    if (isStaff) {\n      loadLeaderboards();\n    } else {\n      setLeaderboards({});\n      setError(\"\");\n      setLoading(false);\n    }\n  }, [isStaff, loadLeaderboards]);\n\n  const handleSelectUser = (type, value) => {\n    if (!value) {\n      resetForm(type);\n      return;\n    }\n\n    const users = leaderboards[type]?.users || [];\n    let selectedUser = null;\n\n    if (value.startsWith(\"id:\")) {\n      const id = value.slice(3);\n      selectedUser = users.find(\n        (user) => user.userId && String(user.userId) === id\n      );\n    } else if (value.startsWith(\"idx:\")) {\n      const index = Number(value.slice(4));\n      if (!Number.isNaN(index) && users[index]) {\n        selectedUser = users[index];\n      }\n    }\n\n    if (selectedUser) {\n      updateForm(type, {\n        selectedUserKey: value,\n        username: selectedUser.name || \"\",\n        userId: selectedUser.userId ? String(selectedUser.userId) : \"\",\n      });\n    } else {\n      updateForm(type, { selectedUserKey: value });\n    }\n  };\n\n  const submitChange = async (type, direction) => {\n    const form = forms[type] || { ...EMPTY_FORM };\n    const amount = Number(form.points);\n\n    if (!amount || amount <= 0) {\n      setError(\"Veuillez indiquer un nombre de points strictement positif.\");\n      return;\n    }\n\n    if (!form.username && !form.userId) {\n      setError(\n        \"Un nom d'utilisateur ou un identifiant Discord est requis pour continuer.\"\n      );\n      return;\n    }\n\n    try {\n      setSubmitting(type);\n      setError(\"\");\n\n      const payload = {\n        delta: direction === \"add\" ? amount : -amount,\n        username: form.username || undefined,\n        userId: form.userId ? String(form.userId) : undefined,\n      };\n\n      const updated = await staffUpdatePoints(type, payload);\n      if (updated?.error) {\n        throw new Error(updated.error);\n      }\n\n      setLeaderboards((prev) => ({\n        ...prev,\n        [type]: {\n          ...(prev[type] || {}),\n          ...updated,\n        },\n      }));\n      resetForm(type);\n    } catch (err) {\n      console.error(\"Staff update failed\", err);\n      setError(\n        err?.message || \"Impossible de mettre à jour le classement. Réessayez.\"\n      );\n    } finally {\n      setSubmitting(null);\n    }\n  };\n\n  const renderLeaderboardRows = (users = []) => {\n    if (!Array.isArray(users) || users.length === 0) {\n      return (\n        <tr>\n          <td colSpan=\"4\" className=\"staff-empty\">\n            Aucun joueur pour le moment.\n          </td>\n        </tr>\n      );\n    }\n\n    return users.map((user, index) => (\n      <tr key={`${user.userId || user.name || index}-${index}`}>\n        <td>{index + 1}</td>\n        <td>{user.name || \"Sans nom\"}</td>\n        <td>{formatNumberWithSpaces(user.score || 0)}</td>\n        <td>{user.userId || \"—\"}</td>\n      </tr>\n    ));\n  };\n\n  if (!isStaff) {\n    return (\n      <section className=\"App\">\n        <div className=\"staff-dashboard staff-dashboard--center\">\n          <div className=\"staff-card\">\n            <h3>Accès refusé</h3>\n            <p>\n              Ce tableau de bord est réservé aux membres du staff habilités.\n            </p>\n          </div>\n        </div>\n      </section>\n    );\n  }\n\n  return (\n    <section className=\"App\">\n      <div className=\"staff-dashboard\">\n        <div className=\"staff-dashboard-header\">\n          <Dropdown\n            types={STAFF_TYPES}\n            items={POINT_OPTIONS}\n            onSelect={setSelectedType}\n          />\n\n          <button\n            className=\"staff-refresh\"\n            onClick={loadLeaderboards}\n            disabled={loading || submitting !== null}\n          >\n            Recharger\n          </button>\n        </div>\n\n        {error && <div className=\"staff-error\">{error}</div>}\n\n        {loading ? (\n          <div className=\"spinner-container\">\n            <div className=\"spinner\" aria-hidden=\"true\"></div>\n          </div>\n        ) : (\n          <div className=\"staff-grid\">\n            {(selectedType ? [selectedType] : STAFF_TYPES).map((type) => {\n              const option = POINT_OPTIONS[type] || {};\n              const board = leaderboards[type] || {};\n              const users = board.users || [];\n              const form = forms[type] || { ...EMPTY_FORM };\n              const disabled = submitting === type;\n              const hasDates = board.start && board.end;\n\n              return (\n                <div className=\"staff-card\" key={type}>\n                  <div className=\"staff-card-header\">\n                    <div className=\"staff-card-title\">\n                      <h3>{option.label || type}</h3>\n                      {option.icon && (\n                        <img\n                          src={option.icon}\n                          alt={option.label || type}\n                          className=\"staff-card-icon\"\n                        />\n                      )}\n                    </div>\n                    {hasDates && (\n                      <span className=\"staff-period\">\n                        {formatDateShort(board.start)} -{\" \"}\n                        {formatDateShort(board.end)}\n                      </span>\n                    )}\n                  </div>\n\n                  <div className=\"staff-table-wrapper\">\n                    <table className=\"staff-table\">\n                      <thead>\n                        <tr>\n                          <th>#</th>\n                          <th>Joueur</th>\n                          <th>Points</th>\n                          <th>Discord ID</th>\n                        </tr>\n                      </thead>\n                      <tbody>{renderLeaderboardRows(users)}</tbody>\n                    </table>\n                  </div>\n\n                  <div className=\"staff-form\">\n                    <label>\n                      Joueur existant\n                      <select\n                        value={form.selectedUserKey}\n                        onChange={(event) =>\n                          handleSelectUser(type, event.target.value)\n                        }\n                      >\n                        <option value=\"\">-- Nouveau membre --</option>\n                        {users.map((user, index) => {\n                          const value = user.userId\n                            ? `id:${user.userId}`\n                            : `idx:${index}`;\n                          return (\n                            <option key={value} value={value}>\n                              {user.name || \"Sans nom\"} (\n                              {formatNumberWithSpaces(user.score || 0)} pts)\n                            </option>\n                          );\n                        })}\n                      </select>\n                    </label>\n\n                    <label>\n                      Nom d'affichage\n                      <input\n                        type=\"text\"\n                        placeholder=\"Nom du joueur\"\n                        value={form.username}\n                        onChange={(event) =>\n                          updateForm(type, {\n                            username: event.target.value,\n                          })\n                        }\n                      />\n                    </label>\n\n                    <label>\n                      Discord ID (optionnel)\n                      <input\n                        type=\"text\"\n                        placeholder=\"Identifiant numérique\"\n                        value={form.userId}\n                        onChange={(event) =>\n                          updateForm(type, {\n                            userId: event.target.value.trim(),\n                          })\n                        }\n                      />\n                    </label>\n\n                    <label>\n                      Points\n                      <input\n                        type=\"number\"\n                        min=\"1\"\n                        max=\"1000000\"\n                        value={form.points}\n                        onChange={(event) =>\n                          updateForm(type, {\n                            points: event.target.value,\n                          })\n                        }\n                      />\n                    </label>\n\n                    <div className=\"staff-form-actions\">\n                      <button\n                        type=\"button\"\n                        className=\"staff-button staff-button--add\"\n                        disabled={disabled}\n                        onClick={() => submitChange(type, \"add\")}\n                      >\n                        Ajouter\n                      </button>\n                      <button\n                        type=\"button\"\n                        className=\"staff-button staff-button--remove\"\n                        disabled={disabled}\n                        onClick={() => submitChange(type, \"remove\")}\n                      >\n                        Retirer\n                      </button>\n                      <button\n                        type=\"button\"\n                        className=\"staff-button staff-button--reset\"\n                        disabled={disabled}\n                        onClick={() => resetForm(type)}\n                      >\n                        Vider\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        )}\n      </div>\n    </section>\n  );\n};\n\nexport default Dashboard;\n"],"names":["defaultURL","require","async","result","fetch","type","method","headers","json","WEEKLY_OPTIONS","crystaux","multiplier","label","format","p","concat","formatNumberWithSpaces","compactNumber","requiredAmount","icon","iscoin","ISVALUE_OPTIONS","dragonegg","dragon_egg","beacon","sponge","_ref","types","items","onSelect","isOpen","setIsOpen","useState","selected","setSelected","_jsxs","className","children","_jsx","onClick","prev","src","alt","map","i","option","e","item","preventDefault","toLowerCase","payload","response","Authorization","localStorage","getItem","body","JSON","stringify","resultJson","ok","Error","error","STAFF_TYPES","POINT_OPTIONS","_objectSpread","EMPTY_FORM","selectedUserKey","username","userId","points","isLogged","isAdmin","isStaff","leaderboards","setLeaderboards","forms","setForms","reduce","acc","loading","setLoading","setError","submitting","setSubmitting","selectedType","setSelectedType","resetForm","updateForm","patch","loadLeaderboards","useCallback","Promise","all","currentTop","then","data","catch","err","console","entries","mapped","hasFailure","forEach","_ref2","finally","useEffect","submitChange","direction","form","amount","Number","delta","undefined","String","updated","staffUpdatePoints","message","renderLeaderboardRows","users","arguments","length","Array","isArray","user","index","name","score","colSpan","Dropdown","disabled","board","hasDates","start","end","formatDateShort","value","onChange","event","handleSelectUser","_leaderboards$type","selectedUser","startsWith","id","slice","find","isNaN","target","placeholder","trim","min","max"],"sourceRoot":""}